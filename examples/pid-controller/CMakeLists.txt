# Synth WASM Compiler - PID Controller Demo
#
# Demonstrates formally verified WASM -> ARM compilation
# for safety-critical control algorithms

cmake_minimum_required(VERSION 3.20.0)

find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})
project(synth_pid_controller)

# Main application
target_sources(app PRIVATE src/main.c)

# Link with Synth-compiled WASM functions
# These were generated by the Synth compiler using formally verified
# compilation semantics extracted from Coq proofs
target_sources(app PRIVATE
    src/pid_error.s
    src/pid_integral.s
    src/pid_simple.s
)

# Enable FPU for ARM Cortex-M4F
# This is required for VFP floating-point instructions
zephyr_cc_option(-mfpu=fpv4-sp-d16)
zephyr_cc_option(-mfloat-abi=hard)
